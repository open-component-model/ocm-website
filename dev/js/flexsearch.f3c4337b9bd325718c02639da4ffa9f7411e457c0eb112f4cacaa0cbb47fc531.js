(()=>{var pe=Object.create;var Dt=Object.defineProperty;var de=Object.getOwnPropertyDescriptor;var ae=Object.getOwnPropertyNames;var me=Object.getPrototypeOf,ye=Object.prototype.hasOwnProperty;var K=Math.pow;var we=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var xe=(t,i,e,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of ae(i))!ye.call(t,n)&&n!==e&&Dt(t,n,{get:()=>i[n],enumerable:!(s=de(i,n))||s.enumerable});return t};var ke=(t,i,e)=>(e=t!=null?pe(me(t)):{},xe(i||!t||!t.__esModule?Dt(e,"default",{value:t,enumerable:!0}):e,t));var lt=(t,i,e)=>new Promise((s,n)=>{var r=l=>{try{o(e.next(l))}catch(u){n(u)}},h=l=>{try{o(e.throw(l))}catch(u){n(u)}},o=l=>l.done?s(l.value):Promise.resolve(l.value).then(r,h);o((e=e.apply(t,i)).next())});var Bt=we(()=>{});var ie={};var w;function T(t,i,e){let s=typeof e,n=typeof t;if(s!=="undefined"){if(n!=="undefined"){if(e){if(n==="function"&&s===n)return function(o){return t(e(o))};if(i=t.constructor,i===e.constructor){if(i===Array)return e.concat(t);if(i===Map){var r=new Map(e);for(var h of t)r.set(h[0],h[1]);return r}if(i===Set){h=new Set(e);for(r of t.values())h.add(r);return h}}}return t}return e}return n==="undefined"?i:t}function tt(t,i){return typeof t=="undefined"?i:t}function _(){return Object.create(null)}function P(t){return typeof t=="string"}function ft(t){return typeof t=="object"}function ct(t,i){if(P(i))t=t[i];else for(let e=0;t&&e<i.length;e++)t=t[i[e]];return t}var ve=/[^\p{L}\p{N}]+/u,be=/(\d{3})/g,Se=/(\D)(\d{3})/g,je=/(\d{3})(\D)/g,Kt=/[\u0300-\u036f]/g;function st(t={}){if(!this||this.constructor!==st)return new st(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}w=st.prototype;w.assign=function(t){this.normalize=T(t.normalize,!0,this.normalize);let i=t.include,e=i||t.exclude||t.split,s;if(e||e===""){if(typeof e=="object"&&e.constructor!==RegExp){let n="";s=!i,i||(n+="\\p{Z}"),e.letter&&(n+="\\p{L}"),e.number&&(n+="\\p{N}",s=!!i),e.symbol&&(n+="\\p{S}"),e.punctuation&&(n+="\\p{P}"),e.control&&(n+="\\p{C}"),(e=e.char)&&(n+=typeof e=="object"?e.join(""):e);try{this.split=new RegExp("["+(i?"^":"")+n+"]+","u")}catch(r){this.split=/\s+/}}else this.split=e,s=e===!1||"a1a".split(e).length<2;this.numeric=T(t.numeric,s)}else{try{this.split=T(this.split,ve)}catch(n){this.split=/\s+/}this.numeric=T(t.numeric,T(this.numeric,!0))}if(this.prepare=T(t.prepare,null,this.prepare),this.finalize=T(t.finalize,null,this.finalize),e=t.filter,this.filter=typeof e=="function"?e:T(e&&new Set(e),null,this.filter),this.dedupe=T(t.dedupe,!0,this.dedupe),this.matcher=T((e=t.matcher)&&new Map(e),null,this.matcher),this.mapper=T((e=t.mapper)&&new Map(e),null,this.mapper),this.stemmer=T((e=t.stemmer)&&new Map(e),null,this.stemmer),this.replacer=T(t.replacer,null,this.replacer),this.minlength=T(t.minlength,1,this.minlength),this.maxlength=T(t.maxlength,1024,this.maxlength),this.rtl=T(t.rtl,!1,this.rtl),(this.cache=e=T(t.cache,!0,this.cache))&&(this.F=null,this.L=typeof e=="number"?e:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(let n of this.matcher.keys())this.h+=(this.h?"|":"")+n;if(this.stemmer)for(let n of this.stemmer.keys())this.A+=(this.A?"|":"")+n;return this};w.addStemmer=function(t,i){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,i),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&U(this),this};w.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&U(this),this};w.addMapper=function(t,i){return typeof t=="object"?this.addReplacer(t,i):t.length>1?this.addMatcher(t,i):(this.mapper||(this.mapper=new Map),this.mapper.set(t,i),this.cache&&U(this),this)};w.addMatcher=function(t,i){return typeof t=="object"?this.addReplacer(t,i):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,i):(this.matcher||(this.matcher=new Map),this.matcher.set(t,i),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&U(this),this)};w.addReplacer=function(t,i){return typeof t=="string"?this.addMatcher(t,i):(this.replacer||(this.replacer=[]),this.replacer.push(t,i),this.cache&&U(this),this)};w.encode=function(t,i){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(U,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=Kt?t.normalize("NFKD").replace(Kt,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(Se,"$1 $2").replace(je,"$1 $2").replace(be,"$1 "));let e=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),s=[],n=_(),r,h,o=this.split||this.split===""?t.split(this.split):[t];for(let u=0,f,c;u<o.length;u++)if((f=c=o[u])&&!(f.length<this.minlength||f.length>this.maxlength)){if(i){if(n[f])continue;n[f]=1}else{if(r===f)continue;r=f}if(e)s.push(f);else if(!this.filter||(typeof this.filter=="function"?this.filter(f):!this.filter.has(f))){if(this.cache&&f.length<=this.I)if(this.F){var l=this.D.get(f);if(l||l===""){l&&s.push(l);continue}}else this.F=setTimeout(U,50,this);if(this.stemmer){this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));let a;for(;a!==f&&f.length>2;)a=f,f=f.replace(this.K,p=>this.stemmer.get(p))}if(f&&(this.mapper||this.dedupe&&f.length>1)){l="";for(let a=0,p="",m,g;a<f.length;a++)m=f.charAt(a),m===p&&this.dedupe||((g=this.mapper&&this.mapper.get(m))||g===""?g===p&&this.dedupe||!(p=g)||(l+=g):l+=p=m);f=l}if(this.matcher&&f.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),f=f.replace(this.J,a=>this.matcher.get(a))),f&&this.replacer)for(l=0;f&&l<this.replacer.length;l+=2)f=f.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,f),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),f){if(f!==c)if(i){if(n[f])continue;n[f]=1}else{if(h===f)continue;h=f}s.push(f)}}}return this.finalize&&(s=this.finalize(s)||s),this.cache&&t.length<=this.H&&(this.B.set(t,s),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),s};function U(t){t.F=null,t.B.clear(),t.D.clear()}function Tt(t,i,e){e||(i||typeof t!="object"?typeof i=="object"&&(e=i,i=0):e=t),e&&(t=e.query||t,i=e.limit||i);let s=""+(i||0);e&&(s+=(e.offset||0)+!!e.context+!!e.suggest+(e.resolve!==!1)+(e.resolution||this.resolution)+(e.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new q);let n=this.cache.get(t+s);if(!n){let r=e&&e.cache;r&&(e.cache=!1),n=this.search(t,i,e),r&&(e.cache=r),this.cache.set(t+s,n)}return n}function q(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}q.prototype.set=function(t,i){this.cache.set(this.h=t,i),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};q.prototype.get=function(t){let i=this.cache.get(t);return i&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,i)),i};q.prototype.remove=function(t){for(let i of this.cache){let e=i[0];i[1].includes(t)&&this.cache.delete(e)}};q.prototype.clear=function(){this.cache.clear(),this.h=""};var Zt={normalize:!1,numeric:!1,dedupe:!1},at={},Ct=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Qt=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Vt=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Xt={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},$t={Exact:Zt,Default:at,Normalize:at,LatinBalance:{mapper:Ct},LatinAdvanced:{mapper:Ct,matcher:Qt,replacer:Vt},LatinExtra:{mapper:Ct,replacer:Vt.concat([/(?!^)[aeo]/g,""]),matcher:Qt},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let e=0;e<t.length;e++){var i=t[e];let s=i.charAt(0),n=Xt[s];for(let r=1,h;r<i.length&&(h=i.charAt(r),h==="h"||h==="w"||!(h=Xt[h])||h===n||(s+=h,n=h,s.length!==4));r++);t[e]=s}}},CJK:{split:""},LatinExact:Zt,LatinDefault:at,LatinSimple:at};function Yt(t,i,e,s){let n=[];for(let r=0,h;r<t.index.length;r++)if(h=t.index[r],i>=h.length)i-=h.length;else{i=h[s?"splice":"slice"](i,e);let o=i.length;if(o&&(n=n.length?n.concat(i):i,e-=o,s&&(t.length-=o),!e))break;i=0}return n}function rt(t){if(!this||this.constructor!==rt)return new rt(t);this.index=t?[t]:[],this.length=t?t.length:0;let i=this;return new Proxy([],{get(e,s){if(s==="length")return i.length;if(s==="push")return function(n){i.index[i.index.length-1].push(n),i.length++};if(s==="pop")return function(){if(i.length)return i.length--,i.index[i.index.length-1].pop()};if(s==="indexOf")return function(n){let r=0;for(let h=0,o,l;h<i.index.length;h++){if(o=i.index[h],l=o.indexOf(n),l>=0)return r+l;r+=o.length}return-1};if(s==="includes")return function(n){for(let r=0;r<i.index.length;r++)if(i.index[r].includes(n))return!0;return!1};if(s==="slice")return function(n,r){return Yt(i,n||0,r||i.length,!1)};if(s==="splice")return function(n,r){return Yt(i,n||0,r||i.length,!0)};if(s==="constructor")return Array;if(typeof s!="symbol")return(e=i.index[s/K(2,31)|0])&&e[s]},set(e,s,n){return e=s/K(2,31)|0,(i.index[e]||(i.index[e]=[]))[s]=n,i.length++,!0}})}rt.prototype.clear=function(){this.index.length=0};rt.prototype.push=function(){};function N(t=8){if(!this||this.constructor!==N)return new N(t);this.index=_(),this.h=[],this.size=0,t>32?(this.B=se,this.A=BigInt(t)):(this.B=ne,this.A=t)}N.prototype.get=function(t){let i=this.index[this.B(t)];return i&&i.get(t)};N.prototype.set=function(t,i){var e=this.B(t);let s=this.index[e];s?(e=s.size,s.set(t,i),(e-=s.size)&&this.size++):(this.index[e]=s=new Map([[t,i]]),this.h.push(s),this.size++)};function H(t=8){if(!this||this.constructor!==H)return new H(t);this.index=_(),this.h=[],this.size=0,t>32?(this.B=se,this.A=BigInt(t)):(this.B=ne,this.A=t)}H.prototype.add=function(t){var i=this.B(t);let e=this.index[i];e?(i=e.size,e.add(t),(i-=e.size)&&this.size++):(this.index[i]=e=new Set([t]),this.h.push(e),this.size++)};w=N.prototype;w.has=H.prototype.has=function(t){let i=this.index[this.B(t)];return i&&i.has(t)};w.delete=H.prototype.delete=function(t){let i=this.index[this.B(t)];i&&i.delete(t)&&this.size--};w.clear=H.prototype.clear=function(){this.index=_(),this.h=[],this.size=0};w.values=H.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let i of this.h[t].values())yield i};w.keys=H.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let i of this.h[t].keys())yield i};w.entries=H.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let i of this.h[t].entries())yield i};function ne(t){let i=K(2,this.A)-1;if(typeof t=="number")return t&i;let e=0,s=this.A+1;for(let n=0;n<t.length;n++)e=(e*s^t.charCodeAt(n))&i;return this.A===32?e+K(2,31):e}function se(t){let i=K(BigInt(2),this.A)-BigInt(1);var e=typeof t;if(e==="bigint")return t&i;if(e==="number")return BigInt(t)&i;e=BigInt(0);let s=this.A+BigInt(1);for(let n=0;n<t.length;n++)e=(e*s^BigInt(t.charCodeAt(n)))&i;return e}var et,ut;function Me(t){return lt(this,null,function*(){t=t.data;var i=t.task;let e=t.id,s=t.args;switch(i){case"init":ut=t.options||{},(i=t.factory)?(Function("return "+i)()(self),et=new self.FlexSearch.Index(ut),delete self.FlexSearch):et=new F(ut),postMessage({id:e});break;default:let n;i==="export"&&(s[1]?(s[0]=ut.export,s[2]=0,s[3]=1):s=null),i==="import"?s[0]&&(t=yield ut.import.call(et,s[0]),et.import(s[0],t)):((n=s&&et[i].apply(et,s))&&n.then&&(n=yield n),n&&n.await&&(n=yield n.await),i==="search"&&n.result&&(n=n.result)),postMessage(i==="search"?{id:e,msg:n}:{id:e})}})}function Jt(t){it.call(t,"add"),it.call(t,"append"),it.call(t,"search"),it.call(t,"update"),it.call(t,"remove"),it.call(t,"searchCache")}var It,Ut,wt;function Ae(){It=wt=0}function it(t){this[t+"Async"]=function(){let i=arguments;var e=i[i.length-1];let s;if(typeof e=="function"&&(s=e,delete i[i.length-1]),It?wt||(wt=Date.now()-Ut>=this.priority*this.priority*3):(It=setTimeout(Ae,0),Ut=Date.now()),wt){let r=this;return new Promise(h=>{setTimeout(function(){h(r[t+"Async"].apply(r,i))},0)})}let n=this[t].apply(this,i);return e=n.then?n:new Promise(r=>r(n)),s&&e.then(s),e}}var Z=0;function E(t={},i){function e(o){function l(u){u=u.data||u;let f=u.id,c=f&&r.h[f];c&&(c(u.msg),delete r.h[f])}if(this.worker=o,this.h=_(),this.worker)return n?this.worker.on("message",l):this.worker.onmessage=l,t.config?new Promise(function(u){Z>1e9&&(Z=0),r.h[++Z]=function(){u(r)},r.worker.postMessage({id:Z,task:"init",factory:s,options:t})}):(this.priority=t.priority||4,this.encoder=i||null,this.worker.postMessage({task:"init",factory:s,options:t}),this)}if(!this||this.constructor!==E)return new E(t);let s=typeof self!="undefined"?self._factory:typeof window!="undefined"?window._factory:null;s&&(s=s.toString());let n=typeof window=="undefined",r=this,h=ze(s,n,t.worker);return h.then?h.then(function(o){return e.call(r,o)}):e.call(this,h)}Q("add");Q("append");Q("search");Q("update");Q("remove");Q("clear");Q("export");Q("import");E.prototype.searchCache=Tt;Jt(E.prototype);function Q(t){E.prototype[t]=function(){let i=this,e=[].slice.call(arguments);var s=e[e.length-1];let n;return typeof s=="function"&&(n=s,e.pop()),s=new Promise(function(r){t==="export"&&typeof e[0]=="function"&&(e[0]=null),Z>1e9&&(Z=0),i.h[++Z]=r,i.worker.postMessage({task:t,id:Z,args:e})}),n?(s.then(n),this):s}}function ze(t,i,e){return i?typeof module!="undefined"?new(Bt()).Worker(__dirname+"/worker/node.js"):Promise.resolve().then(()=>ke(Bt())).then(function(s){return new s.Worker(ie.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Me.toString()],{type:"text/javascript"}))):new window.Worker(typeof e=="string"?e:ie.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}G.prototype.add=function(t,i,e){if(ft(t)&&(i=t,t=ct(i,this.key)),i&&(t||t===0)){if(!e&&this.reg.has(t))return this.update(t,i);for(let o=0,l;o<this.field.length;o++){l=this.B[o];var s=this.index.get(this.field[o]);if(typeof l=="function"){var n=l(i);n&&s.add(t,n,e,!0)}else n=l.G,(!n||n(i))&&(l.constructor===String?l=[""+l]:P(l)&&(l=[l]),Lt(i,l,this.D,0,s,t,l[0],e))}if(this.tag)for(s=0;s<this.A.length;s++){var r=this.A[s];n=this.tag.get(this.F[s]);let o=_();if(typeof r=="function"){if(r=r(i),!r)continue}else{var h=r.G;if(h&&!h(i))continue;r.constructor===String&&(r=""+r),r=ct(i,r)}if(n&&r){P(r)&&(r=[r]);for(let l=0,u,f;l<r.length;l++)if(u=r[l],!o[u]&&(o[u]=1,(h=n.get(u))?f=h:n.set(u,f=[]),!e||!f.includes(t))){if(f.length===K(2,31)-1){if(h=new rt(f),this.fastupdate)for(let c of this.reg.values())c.includes(f)&&(c[c.indexOf(f)]=h);n.set(u,f=h)}f.push(t),this.fastupdate&&((h=this.reg.get(t))?h.push(f):this.reg.set(t,[f]))}}}if(this.store&&(!e||!this.store.has(t))){let o;if(this.h){o=_();for(let l=0,u;l<this.h.length;l++){if(u=this.h[l],(e=u.G)&&!e(i))continue;let f;if(typeof u=="function"){if(f=u(i),!f)continue;u=[u.O]}else if(P(u)||u.constructor===String){o[u]=i[u];continue}Ot(i,o,u,0,u[0],f)}}this.store.set(t,o||i)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function Ot(t,i,e,s,n,r){if(t=t[n],s===e.length-1)i[n]=r||t;else if(t)if(t.constructor===Array)for(i=i[n]=Array(t.length),n=0;n<t.length;n++)Ot(t,i,e,s,n);else i=i[n]||(i[n]=_()),n=e[++s],Ot(t,i,e,s,n)}function Lt(t,i,e,s,n,r,h,o){if(t=t[h])if(s===i.length-1){if(t.constructor===Array){if(e[s]){for(i=0;i<t.length;i++)n.add(r,t[i],!0,!0);return}t=t.join(" ")}n.add(r,t,o,!0)}else if(t.constructor===Array)for(h=0;h<t.length;h++)Lt(t,i,e,s,n,r,h,o);else h=i[++s],Lt(t,i,e,s,n,r,h,o)}function Pt(t,i,e,s){if(!t.length)return t;if(t.length===1)return t=t[0],t=e||t.length>i?t.slice(e,e+i):t,s?nt.call(this,t):t;let n=[];for(let r=0,h,o;r<t.length;r++)if((h=t[r])&&(o=h.length)){if(e){if(e>=o){e-=o;continue}h=h.slice(e,e+i),o=h.length,e=0}if(o>i&&(h=h.slice(0,i),o=i),!n.length&&o>=i)return s?nt.call(this,h):h;if(n.push(h),i-=o,!i)break}return n=n.length>1?[].concat.apply([],n):n[0],s?nt.call(this,n):n}function Mt(t,i,e,s){var n=s[0];if(n[0]&&n[0].query)return t[i].apply(t,n);if(!(i!=="and"&&i!=="not"||t.result.length||t.await||n.suggest))return s.length>1&&(n=s[s.length-1]),(s=n.resolve)?t.await||t.result:t;let r=[],h=0,o=0,l,u,f,c,a;for(i=0;i<s.length;i++)if(n=s[i]){var p=void 0;if(n.constructor===C)p=n.await||n.result;else if(n.then||n.constructor===Array)p=n;else{h=n.limit||0,o=n.offset||0,f=n.suggest,u=n.resolve,l=((c=n.highlight||t.highlight)||n.enrich)&&u,p=n.queue;let m=n.async||p,g=n.index,d=n.query;if(g?t.index||(t.index=g):g=t.index,d||n.tag){let x=n.field||n.pluck;if(x&&(!d||t.query&&!c||(t.query=d,t.field=x,t.highlight=c),g=g.index.get(x)),p&&(a||t.await)){a=1;let y,b=t.C.length,A=new Promise(function(B){y=B});(function(B,M){A.h=function(){M.index=null,M.resolve=!1;let S=m?B.searchAsync(M):B.search(M);return S.then?S.then(function(k){return t.C[b]=k=k.result||k,y(k),k}):(S=S.result||S,y(S),S)}})(g,Object.assign({},n)),t.C.push(A),r[i]=A;continue}else n.resolve=!1,n.index=null,p=m?g.searchAsync(n):g.search(n),n.resolve=u,n.index=g}else if(n.and)p=mt(n,"and",g);else if(n.or)p=mt(n,"or",g);else if(n.not)p=mt(n,"not",g);else if(n.xor)p=mt(n,"xor",g);else continue}p.await?(a=1,p=p.await):p.then?(a=1,p=p.then(function(m){return m.result||m})):p=p.result||p,r[i]=p}if(a&&!t.await&&(t.await=new Promise(function(m){t.return=m})),a){let m=Promise.all(r).then(function(g){for(let d=0;d<t.C.length;d++)if(t.C[d]===m){t.C[d]=function(){return e.call(t,g,h,o,l,u,f,c)};break}Nt(t)});t.C.push(m)}else if(t.await)t.C.push(function(){return e.call(t,r,h,o,l,u,f,c)});else return e.call(t,r,h,o,l,u,f,c);return u?t.await||t.result:t}function mt(t,i,e){t=t[i];let s=t[0]||t;return s.index||(s.index=e),e=new C(s),t.length>1&&(e=e[i].apply(e,t.slice(1))),e}C.prototype.or=function(){return Mt(this,"or",Be,arguments)};function Be(t,i,e,s,n,r,h){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=re(t,i,e,!1,this.h),e=0)),n&&(this.await=null),n?this.resolve(i,e,s,h):this}C.prototype.and=function(){return Mt(this,"and",Ce,arguments)};function Ce(t,i,e,s,n,r,h){if(!r&&!this.result.length)return n?this.result:this;let o;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let l=0;for(let u=0,f,c;u<t.length;u++)if((f=t[u])&&(c=f.length))l<c&&(l=c);else if(!r){l=0;break}l?(this.result=kt(t,l,i,e,r,this.h,n),o=!0):this.result=[]}else r||(this.result=t);return n&&(this.await=null),n?this.resolve(i,e,s,h,o):this}C.prototype.xor=function(){return Mt(this,"xor",_e,arguments)};function _e(t,i,e,s,n,r,h){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{r=e;var o=this.h;let l=[],u=_(),f=0;for(let c=0,a;c<t.length;c++)if(a=t[c]){f<a.length&&(f=a.length);for(let p=0,m;p<a.length;p++)if(m=a[p])for(let g=0,d;g<m.length;g++)d=m[g],u[d]=u[d]?2:1}for(let c=0,a,p=0;c<f;c++)for(let m=0,g;m<t.length;m++)if((g=t[m])&&(a=g[c])){for(let d=0,x;d<a.length;d++)if(x=a[d],u[x]===1)if(r)r--;else if(n){if(l.push(x),l.length===i){t=l;break t}}else{let y=c+(m?o:0);if(l[y]||(l[y]=[]),l[y].push(x),++p===i){t=l;break t}}}t=l}this.result=t,o=!0}else r||(this.result=t);return n&&(this.await=null),n?this.resolve(i,e,s,h,o):this}C.prototype.not=function(){return Mt(this,"not",Ie,arguments)};function Ie(t,i,e,s,n,r,h){if(!r&&!this.result.length)return n?this.result:this;if(t.length&&this.result.length){t:{r=e;var o=[];t=new Set(t.flat().flat());for(let l=0,u,f=0;l<this.result.length;l++)if(u=this.result[l]){for(let c=0,a;c<u.length;c++)if(a=u[c],!t.has(a)){if(r)r--;else if(n){if(o.push(a),o.length===i){t=o;break t}}else if(o[l]||(o[l]=[]),o[l].push(a),++f===i){t=o;break t}}}t=o}this.result=t,o=!0}return n&&(this.await=null),n?this.resolve(i,e,s,h,o):this}function xt(t,i,e,s,n){let r,h,o;typeof n=="string"?(r=n,n=""):r=n.template,h=r.indexOf("$1"),o=r.substring(h+2),h=r.substring(0,h);let l=n&&n.boundary,u=!n||n.clip!==!1,f=n&&n.merge&&o&&h&&new RegExp(o+" "+h,"g");n=n&&n.ellipsis;var c=0;if(typeof n=="object"){var a=n.template;c=a.length-2,n=n.pattern}typeof n!="string"&&(n=n===!1?"":"..."),c&&(n=a.replace("$1",n)),a=n.length-c;let p,m;typeof l=="object"&&(p=l.before,p===0&&(p=-1),m=l.after,m===0&&(m=-1),l=l.total||9e5),c=new Map;for(let At=0,X,Wt,ht;At<i.length;At++){let ot;if(s)ot=i,ht=s;else{var g=i[At];if(ht=g.field,!ht)continue;ot=g.result}Wt=e.get(ht),X=Wt.encoder,g=c.get(X),typeof g!="string"&&(g=X.encode(t),c.set(X,g));for(let pt=0;pt<ot.length;pt++){var d=ot[pt].doc;if(!d||(d=ct(d,ht),!d))continue;var x=d.trim().split(/\s+/);if(!x.length)continue;d="";var y=[];let dt=[];for(var b=-1,A=-1,B=0,M=0;M<x.length;M++){var S=x[M],k=X.encode(S);k=k.length>1?k.join(" "):k[0];let v;if(k&&S){for(var j=S.length,O=(X.split?S.replace(X.split,""):S).length-k.length,z="",R=0,$=0;$<g.length;$++){var J=g[$];if(J){var L=J.length;L+=O,R&&L<=R||(J=k.indexOf(J),J>-1&&(z=(J?S.substring(0,J):"")+h+S.substring(J,J+L)+o+(J+L<j?S.substring(J+L):""),R=L,v=!0))}}z&&(l&&(b<0&&(b=d.length+(d?1:0)),A=d.length+(d?1:0)+z.length,B+=j,dt.push(y.length),y.push({match:z})),d+=(d?" ":"")+z)}if(!v)S=x[M],d+=(d?" ":"")+S,l&&y.push({text:S});else if(l&&B>=l)break}if(B=dt.length*(r.length-2),p||m||l&&d.length-B>l)if(B=l+B-a*2,M=A-b,p>0&&(M+=p),m>0&&(M+=m),M<=B)x=p?b-(p>0?p:0):b-((B-M)/2|0),y=m?A+(m>0?m:0):x+B,u||(x>0&&d.charAt(x)!==" "&&d.charAt(x-1)!==" "&&(x=d.indexOf(" ",x),x<0&&(x=0)),y<d.length&&d.charAt(y-1)!==" "&&d.charAt(y)!==" "&&(y=d.lastIndexOf(" ",y),y<A?y=A:++y)),d=(x?n:"")+d.substring(x,y)+(y<d.length?n:"");else{for(A=[],b={},B={},M={},S={},k={},z=O=j=0,$=R=1;;){var W=void 0;for(let v=0,I;v<dt.length;v++){if(I=dt[v],z)if(O!==z){if(M[v+1])continue;if(I+=z,b[I]){j-=a,B[v+1]=1,M[v+1]=1;continue}if(I>=y.length-1){if(I>=y.length){M[v+1]=1,I>=x.length&&(B[v+1]=1);continue}j-=a}if(d=y[I].text,L=m&&k[v])if(L>0){if(d.length>L)if(M[v+1]=1,u)d=d.substring(0,L);else continue;(L-=d.length)||(L=-1),k[v]=L}else{M[v+1]=1;continue}if(j+d.length+1<=l)d=" "+d,A[v]+=d;else if(u)W=l-j-1,W>0&&(d=" "+d.substring(0,W),A[v]+=d),M[v+1]=1;else{M[v+1]=1;continue}}else{if(M[v])continue;if(I-=O,b[I]){j-=a,M[v]=1,B[v]=1;continue}if(I<=0){if(I<0){M[v]=1,B[v]=1;continue}j-=a}if(d=y[I].text,L=p&&S[v])if(L>0){if(d.length>L)if(M[v]=1,u)d=d.substring(d.length-L);else continue;(L-=d.length)||(L=-1),S[v]=L}else{M[v]=1;continue}if(j+d.length+1<=l)d+=" ",A[v]=d+A[v];else if(u)W=d.length+1-(l-j),W>=0&&W<d.length&&(d=d.substring(W)+" ",A[v]=d+A[v]),M[v]=1;else{M[v]=1;continue}}else{d=y[I].match,p&&(S[v]=p),m&&(k[v]=m),v&&j++;let zt;if(I?!v&&a&&(j+=a):(B[v]=1,M[v]=1),I>=x.length-1||I<y.length-1&&y[I+1].match?zt=1:a&&(j+=a),j-=r.length-2,!v||j+d.length<=l)A[v]=d;else{W=R=$=B[v]=0;break}zt&&(B[v+1]=1,M[v+1]=1)}j+=d.length,W=b[I]=1}if(W)O===z?z++:O++;else{if(O===z?R=0:$=0,!R&&!$)break;R?(O++,z=O):z++}}d="";for(let v=0,I;v<A.length;v++)I=(v&&B[v]?" ":(v&&!n?" ":"")+n)+A[v],d+=I;n&&!B[A.length]&&(d+=n)}f&&(d=d.replace(f," ")),ot[pt].highlight=d}if(s)break}return i}function C(t,i){if(!this||this.constructor!==C)return new C(t,i);let e=0,s,n,r,h,o,l;if(t&&t.index){let u=t;if(i=u.index,e=u.boost||0,n=u.query){r=u.field||u.pluck,h=u.highlight;let f=u.resolve;t=u.async||u.queue,u.resolve=!1,u.index=null,t=t?i.searchAsync(u):i.search(u),u.resolve=f,u.index=i,t=t.result||t}else t=[]}if(t&&t.then){let u=this;t=t.then(function(f){u.C[0]=u.result=f.result||f,Nt(u)}),s=[t],t=[],o=new Promise(function(f){l=f})}this.index=i||null,this.result=t||[],this.h=e,this.C=s||[],this.await=o||null,this.return=l||null,this.highlight=h||null,this.query=n||"",this.field=r||""}w=C.prototype;w.limit=function(t){if(this.await){let i=this;this.C.push(function(){return i.limit(t).result})}else if(this.result.length){let i=[];for(let e=0,s;e<this.result.length;e++)if(s=this.result[e])if(s.length<=t){if(i[e]=s,t-=s.length,!t)break}else{i[e]=s.slice(0,t);break}this.result=i}return this};w.offset=function(t){if(this.await){let i=this;this.C.push(function(){return i.offset(t).result})}else if(this.result.length){let i=[];for(let e=0,s;e<this.result.length;e++)(s=this.result[e])&&(s.length<=t?t-=s.length:(i[e]=s.slice(t),t=0));this.result=i}return this};w.boost=function(t){if(this.await){let i=this;this.C.push(function(){return i.boost(t).result})}else this.h+=t;return this};function Nt(t,i){let e=t.result;var s=t.await;t.await=null;for(let n=0,r;n<t.C.length;n++)if(r=t.C[n]){if(typeof r=="function")e=r(),t.C[n]=e=e.result||e,n--;else if(r.h)e=r.h(),t.C[n]=e=e.result||e,n--;else if(r.then)return t.await=s}return s=t.return,t.C=[],t.return=null,i||s(e),e}w.resolve=function(t,i,e,s,n){let r=this.await?Nt(this,!0):this.result;if(r.then){let h=this;return r.then(function(){return h.resolve(t,i,e,s,n)})}return r.length&&(typeof t=="object"?(s=t.highlight||this.highlight,e=!!s||t.enrich,i=t.offset,t=t.limit):(s=s||this.highlight,e=!!s||e),r=n?e?nt.call(this.index,r):r:Pt.call(this.index,r,t||100,i,e)),this.finalize(r,s)};w.finalize=function(t,i){if(t.then){let s=this;return t.then(function(n){return s.finalize(n,i)})}i&&t.length&&this.query&&(t=xt(this.query,t,this.index.index,this.field,i));let e=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",e&&e(t),t};function kt(t,i,e,s,n,r,h){let o=t.length,l=[],u,f;u=_();for(let c=0,a,p,m,g;c<i;c++)for(let d=0;d<o;d++)if(m=t[d],c<m.length&&(a=m[c]))for(let x=0;x<a.length;x++){if(p=a[x],(f=u[p])?u[p]++:(f=0,u[p]=1),g=l[f]||(l[f]=[]),!h){let y=c+(d||!n?0:r||0);g=g[y]||(g[y]=[])}if(g.push(p),h&&e&&f===o-1&&g.length-s===e)return s?g.slice(s):g}if(t=l.length)if(n)l=l.length>1?re(l,e,s,h,r):(l=l[0])&&e&&l.length>e||s?l.slice(s,e+s):l;else{if(t<o)return[];if(l=l[t-1],e||s)if(h)(l.length>e||s)&&(l=l.slice(s,e+s));else{n=[];for(let c=0,a;c<l.length;c++)if(a=l[c]){if(s&&a.length>s)s-=a.length;else if((e&&a.length>e||s)&&(a=a.slice(s,e+s),e-=a.length,s&&(s-=a.length)),n.push(a),!e)break}l=n}}return l}function re(t,i,e,s,n){let r=[],h=_(),o;var l=t.length;let u;if(s){for(n=l-1;n>=0;n--)if(u=(s=t[n])&&s.length){for(l=0;l<u;l++)if(o=s[l],!h[o]){if(h[o]=1,e)e--;else if(r.push(o),r.length===i)return r}}}else for(let f=l-1,c,a=0;f>=0;f--){c=t[f];for(let p=0;p<c.length;p++)if(u=(s=c[p])&&s.length){for(let m=0;m<u;m++)if(o=s[m],!h[o])if(h[o]=1,e)e--;else{let g=(p+(f<l-1&&n||0))/(f+1)|0;if((r[g]||(r[g]=[])).push(o),++a===i)return r}}}return r}function Oe(t,i,e){let s=_(),n=[];for(let r=0,h;r<i.length;r++){h=i[r];for(let o=0;o<h.length;o++)s[h[o]]=1}if(e)for(let r=0,h;r<t.length;r++)h=t[r],s[h]&&(n.push(h),s[h]=0);else for(let r=0,h,o;r<t.result.length;r++)for(h=t.result[r],i=0;i<h.length;i++)o=h[i],s[o]&&((n[r]||(n[r]=[])).push(o),s[o]=0);return n}_();G.prototype.search=function(t,i,e,s){e||(!i&&ft(t)?(e=t,t=""):ft(i)&&(e=i,i=0));let n=[];var r=[];let h,o,l,u,f,c,a=0,p=!0,m;if(e){e.constructor===Array&&(e={index:e}),t=e.query||t,h=e.pluck,o=e.merge,u=e.boost,c=h||e.field||(c=e.index)&&(c.index?null:c);var g=this.tag&&e.tag;l=e.suggest,p=e.resolve!==!1,f=e.cache,m=p&&this.store&&e.highlight;var d=!!m||p&&this.store&&e.enrich;i=e.limit||i;var x=e.offset||0;if(i||(i=p?100:0),g&&(!this.db||!s)){g.constructor!==Array&&(g=[g]);var y=[];for(let S=0,k;S<g.length;S++)if(k=g[S],k.field&&k.tag){var b=k.tag;if(b.constructor===Array)for(var A=0;A<b.length;A++)y.push(k.field,b[A]);else y.push(k.field,b)}else{b=Object.keys(k);for(let j=0,O,z;j<b.length;j++)if(O=b[j],z=k[O],z.constructor===Array)for(A=0;A<z.length;A++)y.push(O,z[A]);else y.push(O,z)}if(g=y,!t){if(r=[],y.length)for(g=0;g<y.length;g+=2){if(this.db){if(s=this.index.get(y[g]),!s)continue;r.push(s=s.db.tag(y[g+1],i,x,d))}else s=Le.call(this,y[g],y[g+1],i,x,d);n.push(p?{field:y[g],tag:y[g+1],result:s}:[s])}if(r.length){let S=this;return Promise.all(r).then(function(k){for(let j=0;j<k.length;j++)p?n[j].result=k[j]:n[j]=k[j];return p?n:new C(n.length>1?kt(n,1,0,0,l,u):n[0],S)})}return p?n:new C(n.length>1?kt(n,1,0,0,l,u):n[0],this)}}p||h||!(c=c||this.field)||(P(c)?h=c:(c.constructor===Array&&c.length===1&&(c=c[0]),h=c.field||c.index)),c&&c.constructor!==Array&&(c=[c])}c||(c=this.field);let B;y=(this.worker||this.db)&&!s&&[];for(let S=0,k,j,O;S<c.length;S++){if(j=c[S],this.db&&this.tag&&!this.B[S])continue;let z;if(P(j)||(z=j,j=z.field,t=z.query||t,i=tt(z.limit,i),x=tt(z.offset,x),l=tt(z.suggest,l),m=p&&this.store&&tt(z.highlight,m),d=!!m||p&&this.store&&tt(z.enrich,d),f=tt(z.cache,f)),s)k=s[S];else{b=z||e||{},A=b.enrich;var M=this.index.get(j);if(g&&(this.db&&(b.tag=g,B=M.db.support_tag_search,b.field=c),!B&&A&&(b.enrich=!1)),k=f?M.searchCache(t,i,b):M.search(t,i,b),A&&(b.enrich=A),y){y[S]=k;continue}}if(O=(k=k.result||k)&&k.length,g&&O){if(b=[],A=0,this.db&&s){if(!B)for(M=c.length;M<s.length;M++){let R=s[M];if(R&&R.length)A++,b.push(R);else if(!l)return p?n:new C(n,this)}}else for(let R=0,$,J;R<g.length;R+=2){if($=this.tag.get(g[R]),!$){if(l)continue;return p?n:new C(n,this)}if(J=($=$&&$.get(g[R+1]))&&$.length)A++,b.push($);else if(!l)return p?n:new C(n,this)}if(A){if(k=Oe(k,b,p),O=k.length,!O&&!l)return p?k:new C(k,this);A--}}if(O)r[a]=j,n.push(k),a++;else if(c.length===1)return p?n:new C(n,this)}if(y){if(this.db&&g&&g.length&&!B)for(d=0;d<g.length;d+=2){if(r=this.index.get(g[d]),!r){if(l)continue;return p?n:new C(n,this)}y.push(r.db.tag(g[d+1],i,x,!1))}let S=this;return Promise.all(y).then(function(k){return e&&(e.resolve=p),k.length&&(k=S.search(t,i,e,k)),k})}if(!a)return p?n:new C(n,this);if(h&&(!d||!this.store))return n=n[0],p?n:new C(n,this);for(y=[],x=0;x<r.length;x++){if(g=n[x],d&&g.length&&typeof g[0].doc=="undefined"&&(this.db?y.push(g=this.index.get(this.field[0]).db.enrich(g)):g=nt.call(this,g)),h)return p?m?xt(t,g,this.index,h,m):g:new C(g,this);n[x]={field:r[x],result:g}}if(d&&this.db&&y.length){let S=this;return Promise.all(y).then(function(k){for(let j=0;j<k.length;j++)n[j].result=k[j];return m&&(n=xt(t,n,S.index,h,m)),o?Et(n):n})}return m&&(n=xt(t,n,this.index,h,m)),o?Et(n):n};function Et(t){let i=[],e=_(),s=_();for(let n=0,r,h,o,l,u,f,c;n<t.length;n++){r=t[n],h=r.field,o=r.result;for(let a=0;a<o.length;a++)u=o[a],typeof u!="object"?u={id:l=u}:l=u.id,(f=e[l])?f.push(h):(u.field=e[l]=[h],i.push(u)),(c=u.highlight)&&(f=s[l],f||(s[l]=f={},u.highlight=f),f[h]=c)}return i}function Le(t,i,e,s,n){return t=this.tag.get(t),t?(t=t.get(i),t?(i=t.length-s,i>0&&((e&&i>e||s)&&(t=t.slice(s,s+e)),n&&(t=nt.call(this,t))),t):[]):[]}function nt(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);let i=Array(t.length);for(let e=0,s;e<t.length;e++)s=t[e],i[e]={id:s,doc:this.store.get(s)};return i}function G(t){if(!this||this.constructor!==G)return new G(t);let i=t.document||t.doc||t,e,s;if(this.B=[],this.field=[],this.D=[],this.key=(e=i.key||i.id)&&vt(e,this.D)||"id",(s=t.keystore||0)&&(this.keystore=s),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?s?new H(s):new Set:s?new N(s):new Map,this.h=(e=i.store||null)&&e&&e!==!0&&[],this.store=e?s?new N(s):new Map:null,this.cache=(e=t.cache||null)&&new q(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=Re.call(this,t,i),this.tag=null,(e=i.tag)&&(typeof e=="string"&&(e=[e]),e.length)){this.tag=new Map,this.A=[],this.F=[];for(let n=0,r,h;n<e.length;n++){if(r=e[n],h=r.field||r,!h)throw Error("The tag field from the document descriptor is undefined.");r.custom?this.A[n]=r.custom:(this.A[n]=vt(h,this.D),r.filter&&(typeof this.A[n]=="string"&&(this.A[n]=new String(this.A[n])),this.A[n].G=r.filter)),this.F[n]=h,this.tag.set(h,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(let n of this.index.values())n.then&&t.push(n);if(t.length){let n=this;return Promise.all(t).then(function(r){let h=0;for(let o of n.index.entries()){let l=o[0],u=o[1];u.then&&(u=r[h],n.index.set(l,u),h++)}return n})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}w=G.prototype;w.mount=function(t){let i=this.field;if(this.tag)for(let r=0,h;r<this.F.length;r++){h=this.F[r];var e=void 0;this.index.set(h,e=new F({},this.reg)),i===this.field&&(i=i.slice(0)),i.push(h),e.tag=this.tag.get(h)}e=[];let s={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let r=0,h,o;r<i.length;r++){s.field=o=i[r],h=this.index.get(o);let l=new t.constructor(t.id,s);l.id=t.id,e[r]=l.mount(h),h.document=!0,r?h.bypass=!0:h.store=this.store}let n=this;return this.db=Promise.all(e).then(function(){n.db=!0})};w.commit=function(){return lt(this,null,function*(){let t=[];for(let i of this.index.values())t.push(i.commit());yield Promise.all(t),this.reg.clear()})};w.destroy=function(){let t=[];for(let i of this.index.values())t.push(i.destroy());return Promise.all(t)};function Re(t,i){let e=new Map,s=i.index||i.field||i;P(s)&&(s=[s]);for(let r=0,h,o;r<s.length;r++){if(h=s[r],P(h)||(o=h,h=h.field),o=ft(o)?Object.assign({},t,o):t,this.worker){var n=void 0;n=(n=o.encoder)&&n.encode?n:new st(typeof n=="string"?$t[n]:n||{}),n=new E(o,n),e.set(h,n)}this.worker||e.set(h,new F(o,this.reg)),o.custom?this.B[r]=o.custom:(this.B[r]=vt(h,this.D),o.filter&&(typeof this.B[r]=="string"&&(this.B[r]=new String(this.B[r])),this.B[r].G=o.filter)),this.field[r]=h}if(this.h){t=i.store,P(t)&&(t=[t]);for(let r=0,h,o;r<t.length;r++)h=t[r],o=h.field||h,h.custom?(this.h[r]=h.custom,h.custom.O=o):(this.h[r]=vt(o,this.D),h.filter&&(typeof this.h[r]=="string"&&(this.h[r]=new String(this.h[r])),this.h[r].G=h.filter))}return e}function vt(t,i){let e=t.split(":"),s=0;for(let n=0;n<e.length;n++)t=e[n],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(i[s]=!0),t&&(e[s++]=t);return s<e.length&&(e.length=s),s>1?e:e[0]}w.append=function(t,i){return this.add(t,i,!0)};w.update=function(t,i){return this.remove(t).add(t,i)};w.remove=function(t){ft(t)&&(t=ct(t,this.key));for(var i of this.index.values())i.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let e of this.tag.values())for(let s of e){i=s[0];let n=s[1],r=n.indexOf(t);r>-1&&(n.length>1?n.splice(r,1):e.delete(i))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};w.clear=function(){let t=[];for(let i of this.index.values()){let e=i.clear();e.then&&t.push(e)}if(this.tag)for(let i of this.tag.values())i.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};w.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};w.cleanup=function(){for(let t of this.index.values())t.cleanup();return this};w.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(i){return i[0]&&i[0].doc||null}):this.store.get(t)||null};w.set=function(t,i){return typeof t=="object"&&(i=t,t=ct(i,this.key)),this.store.set(t,i),this};w.searchCache=Tt;w.export=Te;w.import=$e;Jt(G.prototype);function Ht(t,i=0){let e=[],s=[];i&&(i=25e4/i*5e3|0);for(let n of t.entries())s.push(n),s.length===i&&(e.push(s),s=[]);return s.length&&e.push(s),e}function Ft(t,i){i||(i=new Map);for(let e=0,s;e<t.length;e++)s=t[e],i.set(s[0],s[1]);return i}function he(t,i=0){let e=[],s=[];i&&(i=25e4/i*1e3|0);for(let n of t.entries())s.push([n[0],Ht(n[1])[0]]),s.length===i&&(e.push(s),s=[]);return s.length&&e.push(s),e}function oe(t,i){i||(i=new Map);for(let e=0,s,n;e<t.length;e++)s=t[e],n=i.get(s[0]),i.set(s[0],Ft(s[1],n));return i}function le(t){let i=[],e=[];for(let s of t.keys())e.push(s),e.length===25e4&&(i.push(e),e=[]);return e.length&&i.push(e),i}function ue(t,i){i||(i=new Set);for(let e=0;e<t.length;e++)i.add(t[e]);return i}function bt(t,i,e,s,n,r,h=0){let o=s&&s.constructor===Array;var l=o?s.shift():s;if(!l)return this.export(t,i,n,r+1);if((l=t((i?i+".":"")+(h+1)+"."+e,JSON.stringify(l)))&&l.then){let u=this;return l.then(function(){return bt.call(u,t,i,e,o?s:null,n,r,h+1)})}return bt.call(this,t,i,e,o?s:null,n,r,h+1)}function Te(t,i,e=0,s=0){if(e<this.field.length){let h=this.field[e];if((i=this.index.get(h).export(t,h,e,s=1))&&i.then){let o=this;return i.then(function(){return o.export(t,h,e+1)})}return this.export(t,h,e+1)}let n,r;switch(s){case 0:n="reg",r=le(this.reg),i=null;break;case 1:n="tag",r=this.tag&&he(this.tag,this.reg.size),i=null;break;case 2:n="doc",r=this.store&&Ht(this.store),i=null;break;default:return}return bt.call(this,t,i,n,r||null,e,s)}function $e(t,i){var e=t.split(".");e[e.length-1]==="json"&&e.pop();let s=e.length>2?e[0]:"";if(e=e.length>2?e[2]:e[1],this.worker&&s)return this.index.get(s).import(t);if(i){if(typeof i=="string"&&(i=JSON.parse(i)),s)return this.index.get(s).import(e,i);switch(e){case"reg":this.fastupdate=!1,this.reg=ue(i,this.reg);for(let n=0,r;n<this.field.length;n++)r=this.index.get(this.field[n]),r.fastupdate=!1,r.reg=this.reg;if(this.worker){i=[];for(let n of this.index.values())i.push(n.import(t));return Promise.all(i)}break;case"tag":this.tag=oe(i,this.tag);break;case"doc":this.store=Ft(i,this.store)}}}function Gt(t,i){let e="";for(let s of t.entries()){t=s[0];let n=s[1],r="";for(let h=0,o;h<n.length;h++){o=n[h]||[""];let l="";for(let u=0;u<o.length;u++)l+=(l?",":"")+(i==="string"?'"'+o[u]+'"':o[u]);l="["+l+"]",r+=(r?",":"")+l}r='["'+t+'",['+r+"]]",e+=(e?",":"")+r}return e}F.prototype.remove=function(t,i){let e=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(e){if(this.fastupdate){for(let s=0,n,r;s<e.length;s++)if((n=e[s])&&(r=n.length))if(n[r-1]===t)n.pop();else{let h=n.indexOf(t);h>=0&&n.splice(h,1)}}else gt(this.map,t),this.depth&&gt(this.ctx,t);i||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&fe(this)),this.cache&&this.cache.remove(t),this};function gt(t,i){let e=0;var s=typeof i=="undefined";if(t.constructor===Array){for(let n=0,r,h,o;n<t.length;n++)if((r=t[n])&&r.length){if(s)return 1;if(h=r.indexOf(i),h>=0){if(r.length>1)return r.splice(h,1),1;if(delete t[n],e)return 1;o=1}else{if(o)return 1;e++}}}else for(let n of t.entries())s=n[0],gt(n[1],i)?e++:t.delete(s);return e}var Je={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};F.prototype.add=function(t,i,e,s){if(i&&(t||t===0)){if(!s&&!e&&this.reg.has(t))return this.update(t,i);s=this.depth,i=this.encoder.encode(i,!s);let u=i.length;if(u){let f=_(),c=_(),a=this.resolution;for(let p=0;p<u;p++){let m=i[this.rtl?u-1-p:p];var n=m.length;if(n&&(s||!c[m])){var r=this.score?this.score(i,m,p,null,0):yt(a,u,p),h="";switch(this.tokenize){case"tolerant":if(D(this,c,m,r,t,e),n>2){for(let g=1,d,x,y,b;g<n-1;g++)d=m.charAt(g),x=m.charAt(g+1),y=m.substring(0,g)+x,b=m.substring(g+2),h=y+d+b,D(this,c,h,r,t,e),h=y+b,D(this,c,h,r,t,e);D(this,c,m.substring(0,m.length-1),r,t,e)}break;case"full":if(n>2){for(let g=0,d;g<n;g++)for(r=n;r>g;r--){h=m.substring(g,r),d=this.rtl?n-1-g:g;var o=this.score?this.score(i,m,p,h,d):yt(a,u,p,n,d);D(this,c,h,o,t,e)}break}case"bidirectional":case"reverse":if(n>1){for(o=n-1;o>0;o--){h=m[this.rtl?n-1-o:o]+h;var l=this.score?this.score(i,m,p,h,o):yt(a,u,p,n,o);D(this,c,h,l,t,e)}h=""}case"forward":if(n>1){for(o=0;o<n;o++)h+=m[this.rtl?n-1-o:o],D(this,c,h,r,t,e);break}default:if(D(this,c,m,r,t,e),s&&u>1&&p<u-1)for(n=this.N,h=m,r=Math.min(s+1,this.rtl?p+1:u-p),o=1;o<r;o++){m=i[this.rtl?u-1-p-o:p+o],l=this.bidirectional&&m>h;let g=this.score?this.score(i,h,p,m,o-1):yt(n+(u/2>n?0:1),u,p,r-1,o-1);D(this,f,l?h:m,g,t,e,l?m:h)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(e?{ins:t}:{del:t}),this.M&&fe(this)),this};function D(t,i,e,s,n,r,h){let o,l;if(!(o=i[e])||h&&!o[h]){if(h?(i=o||(i[e]=_()),i[h]=1,l=t.ctx,(o=l.get(h))?l=o:l.set(h,l=t.keystore?new N(t.keystore):new Map)):(l=t.map,i[e]=1),(o=l.get(e))?l=o:l.set(e,l=o=[]),r){for(let u=0,f;u<o.length;u++)if((f=o[u])&&f.includes(n)){if(u<=s)return;f.splice(f.indexOf(n),1),t.fastupdate&&(i=t.reg.get(n))&&i.splice(i.indexOf(f),1);break}}if(l=l[s]||(l[s]=[]),l.push(n),l.length===K(2,31)-1){if(i=new rt(l),t.fastupdate)for(let u of t.reg.values())u.includes(l)&&(u[u.indexOf(l)]=i);o[s]=l=i}t.fastupdate&&((s=t.reg.get(n))?s.push(l):t.reg.set(n,[l]))}}function yt(t,i,e,s,n){return e&&t>1?i+(s||0)<=t?e+(n||0):(t-1)/(i+(s||0))*(e+(n||0))+1|0:0}F.prototype.search=function(t,i,e){if(e||(i||typeof t!="object"?typeof i=="object"&&(e=i,i=0):(e=t,t="")),e&&e.cache)return e.cache=!1,t=this.searchCache(t,i,e),e.cache=!0,t;let s=[],n,r,h,o=0,l,u,f,c,a;e&&(t=e.query||t,i=e.limit||i,o=e.offset||0,r=e.context,h=e.suggest,a=(l=e.resolve)&&e.enrich,f=e.boost,c=e.resolution,u=this.db&&e.tag),typeof l=="undefined"&&(l=this.resolve),r=this.depth&&r!==!1;let p=this.encoder.encode(t,!r);if(n=p.length,i=i||(l?100:0),n===1)return te.call(this,p[0],"",i,o,l,a,u);if(n===2&&r&&!h)return te.call(this,p[1],p[0],i,o,l,a,u);let m=_(),g=0,d;if(r&&(d=p[0],g=1),c||c===0||(c=d?this.N:this.resolution),this.db){if(this.db.search&&(e=this.db.search(this,p,i,o,h,l,a,u),e!==!1))return e;let x=this;return(function(){return lt(this,null,function*(){for(let y,b;g<n;g++){if((b=p[g])&&!m[b]){if(m[b]=1,y=yield Rt(x,b,d,0,0,!1,!1),y=ee(y,s,h,c)){s=y;break}d&&(h&&y&&s.length||(d=b))}h&&d&&g===n-1&&!s.length&&(c=x.resolution,d="",g=-1,m=_())}return qt(s,c,i,o,h,f,l)})})()}for(let x,y;g<n;g++){if((y=p[g])&&!m[y]){if(m[y]=1,x=Rt(this,y,d,0,0,!1,!1),x=ee(x,s,h,c)){s=x;break}d&&(h&&x&&s.length||(d=y))}h&&d&&g===n-1&&!s.length&&(c=this.resolution,d="",g=-1,m=_())}return qt(s,c,i,o,h,f,l)};function qt(t,i,e,s,n,r,h){let o=t.length,l=t;if(o>1)l=kt(t,i,e,s,n,r,h);else if(o===1)return h?Pt.call(null,t[0],e,s):new C(t[0],this);return h?l:new C(l,this)}function te(t,i,e,s,n,r,h){return t=Rt(this,t,i,e,s,n,r,h),this.db?t.then(function(o){return n?o||[]:new C(o,this)}):t&&t.length?n?Pt.call(this,t,e,s):new C(t,this):n?[]:new C([],this)}function ee(t,i,e,s){let n=[];if(t&&t.length){if(t.length<=s){i.push(t);return}for(let r=0,h;r<s;r++)(h=t[r])&&(n[r]=h);if(n.length){i.push(n);return}}if(!e)return n}function Rt(t,i,e,s,n,r,h,o){let l;return e&&(l=t.bidirectional&&i>e)&&(l=e,e=i,i=l),t.db?t.db.get(i,e,s,n,r,h,o):(t=e?(t=t.ctx.get(e))&&t.get(i):t.map.get(i),t)}function F(t,i){if(!this||this.constructor!==F)return new F(t);if(t){var e=P(t)?t:t.preset;e&&(t=Object.assign({},Je[e],t))}else t={};e=t.context;let s=e===!0?{depth:1}:e||{},n=P(t.encoder)?$t[t.encoder]:t.encode||t.encoder||{};this.encoder=n.encode?n:typeof n=="object"?new st(n):{encode:n},this.resolution=t.resolution||9,this.tokenize=e=(e=t.tokenize)&&e!=="default"&&e!=="exact"&&e||"strict",this.depth=e==="strict"&&s.depth||0,this.bidirectional=s.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(e=t.keystore||0)&&(this.keystore=e),this.map=e?new N(e):new Map,this.ctx=e?new N(e):new Map,this.reg=i||(this.fastupdate?e?new N(e):new Map:e?new H(e):new Set),this.N=s.resolution||3,this.rtl=n.rtl||t.rtl||!1,this.cache=(e=t.cache||null)&&new q(e),this.resolve=t.resolve!==!1,(e=t.db)&&(this.db=this.mount(e)),this.M=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}w=F.prototype;w.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};w.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)};w.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function fe(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}w.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this};w.append=function(t,i){return this.add(t,i,!0)};w.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};w.update=function(t,i){let e=this,s=this.remove(t);return s&&s.then?s.then(()=>e.add(t,i)):this.add(t,i)};w.cleanup=function(){return this.fastupdate?(gt(this.map),this.depth&&gt(this.ctx),this):this};w.searchCache=Tt;w.export=function(t,i,e=0,s=0){let n,r;switch(s){case 0:n="reg",r=le(this.reg);break;case 1:n="cfg",r=null;break;case 2:n="map",r=Ht(this.map,this.reg.size);break;case 3:n="ctx",r=he(this.ctx,this.reg.size);break;default:return}return bt.call(this,t,i,n,r,e,s)};w.import=function(t,i){if(i)switch(typeof i=="string"&&(i=JSON.parse(i)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=ue(i,this.reg);break;case"map":this.map=Ft(i,this.map);break;case"ctx":this.ctx=oe(i,this.ctx)}};w.serialize=function(t=!0){let i="",e="",s="";if(this.reg.size){let r;for(var n of this.reg.keys())r||(r=typeof n),i+=(i?",":"")+(r==="string"?'"'+n+'"':n);i="index.reg=new Set(["+i+"]);",e=Gt(this.map,r),e="index.map=new Map(["+e+"]);";for(let h of this.ctx.entries()){n=h[0];let o=Gt(h[1],r);o="new Map(["+o+"])",o='["'+n+'",'+o+"]",s+=(s?",":"")+o}s="index.ctx=new Map(["+s+"]);"}return t?"function inject(index){"+i+e+s+"}":i+e+s};Jt(F.prototype);var ce=typeof window!="undefined"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),St=["map","ctx","tag","reg","cfg"],Y=_();function jt(t,i={}){if(!this||this.constructor!==jt)return new jt(t,i);typeof t=="object"&&(i=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=i.field?i.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=i.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}w=jt.prototype;w.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};w.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),Y[t.id]||(Y[t.id]=[]),Y[t.id].push(t.field);let i=ce.open(t.id,1);return i.onupgradeneeded=function(){let e=t.db=this.result;for(let s=0,n;s<St.length;s++){n=St[s];for(let r=0,h;r<Y[t.id].length;r++)h=Y[t.id][r],e.objectStoreNames.contains(n+(n!=="reg"&&h?":"+h:""))||e.createObjectStore(n+(n!=="reg"&&h?":"+h:""))}},t.db=V(i,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})};w.close=function(){this.db&&this.db.close(),this.db=null};w.destroy=function(){let t=ce.deleteDatabase(this.id);return V(t)};w.clear=function(){let t=[];for(let e=0,s;e<St.length;e++){s=St[e];for(let n=0,r;n<Y[this.id].length;n++)r=Y[this.id][n],t.push(s+(s!=="reg"&&r?":"+r:""))}let i=this.db.transaction(t,"readwrite");for(let e=0;e<t.length;e++)i.objectStore(t[e]).clear();return V(i)};w.get=function(t,i,e=0,s=0,n=!0,r=!1){t=this.db.transaction((i?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((i?"ctx":"map")+(this.field?":"+this.field:"")).get(i?i+":"+t:t);let h=this;return V(t).then(function(o){let l=[];if(!o||!o.length)return l;if(n){if(!e&&!s&&o.length===1)return o[0];for(let u=0,f;u<o.length;u++)if((f=o[u])&&f.length){if(s>=f.length){s-=f.length;continue}let c=e?s+Math.min(f.length-s,e):f.length;for(let a=s;a<c;a++)l.push(f[a]);if(s=0,l.length===e)break}return r?h.enrich(l):l}return o})};w.tag=function(t,i=0,e=0,s=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);let n=this;return V(t).then(function(r){return!r||!r.length||e>=r.length?[]:!i&&!e?r:(r=r.slice(e,e+i),s?n.enrich(r):r)})};w.enrich=function(t){typeof t!="object"&&(t=[t]);let i=this.db.transaction("reg","readonly").objectStore("reg"),e=[];for(let s=0;s<t.length;s++)e[s]=V(i.get(t[s]));return Promise.all(e).then(function(s){for(let n=0;n<s.length;n++)s[n]={id:t[n],doc:s[n]?JSON.parse(s[n]):null};return s})};w.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),V(t).then(function(i){return!!i})};w.search=null;w.info=function(){};w.transaction=function(t,i,e){t+=t!=="reg"&&this.field?":"+this.field:"";let s=this.h[t+":"+i];if(s)return e.call(this,s);let n=this.db.transaction(t,i);this.h[t+":"+i]=s=n.objectStore(t);let r=e.call(this,s);return this.h[t+":"+i]=null,V(n).finally(function(){return n=s=null,r})};w.commit=function(t){return lt(this,null,function*(){let i=t.commit_task,e=[];t.commit_task=[];for(let s=0,n;s<i.length;s++)n=i[s],n.del&&e.push(n.del);e.length&&(yield this.remove(e)),t.reg.size&&(yield this.transaction("map","readwrite",function(s){for(let n of t.map){let r=n[0],h=n[1];h.length&&(s.get(r).onsuccess=function(){let o=this.result;var l;if(o&&o.length){let u=Math.max(o.length,h.length);for(let f=0,c,a;f<u;f++)if((a=h[f])&&a.length){if((c=o[f])&&c.length)for(l=0;l<a.length;l++)c.push(a[l]);else o[f]=a;l=1}}else o=h,l=1;l&&s.put(o,r)})}}),yield this.transaction("ctx","readwrite",function(s){for(let n of t.ctx){let r=n[0],h=n[1];for(let o of h){let l=o[0],u=o[1];u.length&&(s.get(r+":"+l).onsuccess=function(){let f=this.result;var c;if(f&&f.length){let a=Math.max(f.length,u.length);for(let p=0,m,g;p<a;p++)if((g=u[p])&&g.length){if((m=f[p])&&m.length)for(c=0;c<g.length;c++)m.push(g[c]);else f[p]=g;c=1}}else f=u,c=1;c&&s.put(f,r+":"+l)})}}}),t.store?yield this.transaction("reg","readwrite",function(s){for(let n of t.store){let r=n[0],h=n[1];s.put(typeof h=="object"?JSON.stringify(h):1,r)}}):t.bypass||(yield this.transaction("reg","readwrite",function(s){for(let n of t.reg.keys())s.put(1,n)})),t.tag&&(yield this.transaction("tag","readwrite",function(s){for(let n of t.tag){let r=n[0],h=n[1];h.length&&(s.get(r).onsuccess=function(){let o=this.result;o=o&&o.length?o.concat(h):h,s.put(o,r)})}})),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())})};function _t(t,i,e){let s=t.value,n,r=0;for(let h=0,o;h<s.length;h++){if(o=e?s:s[h]){for(let l=0,u,f;l<i.length;l++)if(f=i[l],u=o.indexOf(f),u>=0)if(n=1,o.length>1)o.splice(u,1);else{s[h]=[];break}r+=o.length}if(e)break}r?n&&t.update(s):t.delete(),t.continue()}w.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(i){i.openCursor().onsuccess=function(){let e=this.result;e&&_t(e,t)}}),this.transaction("ctx","readwrite",function(i){i.openCursor().onsuccess=function(){let e=this.result;e&&_t(e,t)}}),this.transaction("tag","readwrite",function(i){i.openCursor().onsuccess=function(){let e=this.result;e&&_t(e,t,!0)}}),this.transaction("reg","readwrite",function(i){for(let e=0;e<t.length;e++)i.delete(t[e])})])};function V(t,i){return new Promise((e,s)=>{t.onsuccess=t.oncomplete=function(){i&&i(this.result),i=null,e(this.result)},t.onerror=t.onblocked=s,t=null})}var ge={Index:F,Charset:$t,Encoder:st,Document:G,Worker:E,Resolver:C,IndexedDB:jt,Language:{}};(function(){"use strict";let t=new ge.Document({tokenize:"forward",document:{id:"id",index:[{field:"title"},{field:"tags"},{field:"content"},{field:"date",tokenize:"strict",encode:!1}],store:["title","summary","date","permalink"]}});function i(r){let h=document.querySelector("template").content,o=document.createDocumentFragment(),l=document.querySelector(".search-results");l.textContent="";let u=Object.keys(r).length;if(u===0&&query.value==="")document.querySelector(".search-no-results").classList.add("d-none"),document.querySelector(".search-no-recent").classList.remove("d-none");else if(u===0&&query.value!==""){document.querySelector(".search-no-recent").classList.add("d-none");let f=document.querySelector(".query-no-results");f.innerText=query.value,document.querySelector(".search-no-results").classList.remove("d-none")}else document.querySelector(".search-no-recent").classList.add("d-none"),document.querySelector(".search-no-results").classList.add("d-none");for(let f in r){let c=r[f],a=h.cloneNode(!0),p=a.querySelector("a"),m=a.querySelector("time"),g=a.querySelector(".content");p.innerHTML=c.title,p.href=c.permalink,m.innerText=c.date,g.innerHTML=c.summary,o.appendChild(a)}l.appendChild(o)}function e(){let r=document.querySelector(".search-text").value.trim(),o=t.search({query:r,enrich:!0,limit:99}),l={};o.forEach(function(u){u.result.forEach(function(f){l[f.id]=f.doc})}),i(l)}function s(){let r=document.querySelector(".search-form");r.addEventListener("submit",function(h){h.preventDefault(),e()}),r.addEventListener("input",function(){e()}),document.querySelector(".search-loading").classList.add("d-none"),document.querySelector(".search-input").classList.remove("d-none"),document.querySelector(".search-text").focus()}function n(){document.querySelector(".search-loading").classList.remove("d-none"),fetch("/search-index.json").then(function(r){return r.json()}).then(function(r){r.forEach(function(h){t.add(h)})})}n(),s()})();})();
/*!
 * FlexSearch for Bootstrap based Thulite sites
 * Copyright 2021-2024 Thulite
 * Licensed under the MIT License
 * Based on https://github.com/frjo/hugo-theme-zen/blob/main/assets/js/search.js
 */
