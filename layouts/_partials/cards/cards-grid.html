{{- $variant := default "" .cards_variant -}}
{{- $gridClass := "ocm-cards-grid" -}}
{{- if $variant -}}
  {{- $gridClass = printf "%s ocm-cards-grid--%s" $gridClass $variant -}}
{{- end -}}
{{- $cardClass := "ocm-section-card" -}}
{{- if $variant -}}
  {{- $cardClass = printf "%s ocm-section-card--%s" $cardClass $variant -}}
{{- end -}}

{{- $styleValue := "" -}}
{{- if eq $variant "home" -}}
  {{- $styleValue = printf "--ocm-grid-home-columns: %d;" (default 4 .cards_max_columns) -}}
{{- else if .cards_max_columns -}}
  {{- $styleValue = printf "grid-template-columns: repeat(%d, minmax(210px, 1fr));" .cards_max_columns -}}
{{- end -}}

<div class="{{ $gridClass }}"{{ if $styleValue }} style="{{ $styleValue | safeCSS }}"{{ end }}>
  {{- range .items }}
    {{- $href := "#" -}}
    {{- with .link }}{{ $href = ref $.page . }}{{ end -}}
    <a class="{{ $cardClass }}" href="{{ $href }}">
      <span class="ocm-card-icon" aria-hidden="true">{{ .emoji }}</span>
      <div class="ocm-card-title">{{ .title }}</div>
      {{- with .description }}<div class="ocm-card-desc">{{ . }}</div>{{ end -}}
    </a>
  {{- end -}}
</div>
