{{ define "main" }}
 <div class="row flex-xl-nowrap">

   {{ if (in site.Params.doks.sectionNav .Section) -}}
     <div class="col-lg-5 col-xl-4 docs-sidebar{{ if ne site.Params.doks.navbarSticky true }} docs-sidebar-top{{ end }}{{ if site.Params.doks.headerBar }} docs-sidebar-offset{{ end }} d-none d-lg-block">
       {{ partial "sidebar/section-menu.html" . }}
     </div>
   {{ end -}}

   {{ if and (eq site.Params.doks.containerBreakpoint "fluid") (in .Site.Params.mainSections .Type) }}
     <div class="col container-fw d-lg-flex flex-lg-row justify-content-center mx-auto">
   {{ end }}

   {{ if ne .Params.toc false -}}
     <nav class="docs-toc{{ if ne site.Params.doks.navbarSticky true }} docs-toc-top{{ end }}{{ if site.Params.doks.headerBar }} docs-toc-offset{{ end }} d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
       {{ partial "sidebar/docs-toc-desktop.html" . }}
     </nav>
   {{ end -}}

   {{ if .Params.toc -}}
     <main class="docs-content col-lg-11 col-xl-9">
   {{ else -}}
     <main class="docs-content col-lg-11 col-xl-9 mx-xl-auto">
   {{ end -}}

   {{ if site.Params.doks.breadcrumbTrail -}}
     <!-- Breadcrumb navigation for nested content -->
     <nav aria-label="breadcrumb">
       <ol class="breadcrumb">
         {{ partial "main/breadcrumb" . -}}
         <li class="breadcrumb-item active" aria-current="page">{{ .Title }}</li>
       </ol>
     </nav>
   {{ end }}

   <h1>{{ .Title }}</h1>
   <!-- <p class="lead">{{ .Params.lead | safeHTML }}</p> -->

   {{ if ne .Params.toc false -}}
     <nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation">
       {{ partial "sidebar/docs-toc-mobile.html" . }}
     </nav>
   {{ end -}}
 
   <!-- Display content from _index.md (the section node itself) -->
   {{ if site.Params.doks.headlineHash -}}
     {{ partial "main/headline-hash" .Content }}
   {{ else -}}
     {{ .Content }}
   {{ end -}}

   <!-- Display the section node (from _index.md) as a "child" entry in the overview, if wanted -->
   {{/* Only show if this is a section (but not home), and _index.md has more than just empty frontmatter */}}
   {{ if and .IsSection (not .IsHome) (or (.Params.summary) (.Content)) }}
     <div class="section-self-entry mb-4 p-3 border rounded bg-light">
       <!-- Section node: shows summary and/or content from _index.md -->
       <h2 class="h4 mb-2">{{ .Title }}</h2>
       {{ with .Params.summary }}
         <p class="mb-2">{{ . }}</p>
       {{ end }}
       {{ if .Content }}
         <div class="mb-2">{{ .Content }}</div>
       {{ end }}
     </div>
   {{ end }}

   <!-- Display children if this is a section page -->
   {{ if and .IsSection (not .Params.hideChildren) }}
     <div class="section-children">
       {{ if .Pages }}
         <h2>{{ default "In this section" .Params.childrenTitle }}</h2>
         <div class="child-pages">
           {{ range .Pages }}
             <div class="child-page">
               <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
               {{ with .Description }}
                 <p>{{ . }}</p>
               {{ end }}
             </div>
           {{ end }}
         </div>
       {{ end }}
     </div>
   {{ end }}
 
   <div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between">
     {{ if site.Params.doks.lastMod -}}
       {{ partial "main/last-modified.html" . }}
     {{ end -}}
     {{ if site.Params.doks.editPage -}}
       {{ partial "main/edit-page.html" . }}
     {{ end -}}
   </div>
   {{ partial "main/docs-navigation.html" . }}
   <!--
   {{ if not .Site.Params.options.collapsibleSidebar -}}
     {{ partial "main/docs-navigation.html" . }}
   {{ else -}}
     <div class="my-n3"></div>
   {{ end -}}
   -->
   </main>

   {{ if and (eq site.Params.doks.containerBreakpoint "fluid") (in .Site.Params.mainSections .Type) }}
     </div>
   {{ end }}
 </div>
{{ end }}