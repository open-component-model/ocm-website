{{ define "main" }}
  <div class="row flex-xl-nowrap">
    {{ if (in site.Params.doks.sectionNav .Section) -}}
      <div class="col-lg-5 col-xl-4 docs-sidebar{{ if ne site.Params.doks.navbarSticky true }} docs-sidebar-top{{ end }}{{ if site.Params.doks.headerBar }} docs-sidebar-offset{{ end }} d-none d-lg-block">
        {{ partial "sidebar/section-menu.html" . }}
      </div>
    {{ end -}}
    {{ if and (eq site.Params.doks.containerBreakpoint "fluid") (in .Site.Params.mainSections .Type) }}
      <div class="col container-fw d-lg-flex flex-lg-row justify-content-center mx-auto">
    {{ end }}

    <main class="docs-content col-lg-11 col-xl-9 mx-xl-auto">
      {{ if site.Params.doks.breadcrumbTrail -}}
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            {{ partial "main/breadcrumb" . -}}
            <li class="breadcrumb-item active" aria-current="page">{{ .Title }}</li>
          </ol>
        </nav>
      {{ end }}

      <h1>{{ .Title }}</h1>

      <!-- === TOC box always at the top of the main content area (NEW) === -->
      {{ if .TableOfContents }}
        <!-- [TOC-BOX-BEGIN] - TOC is now always shown as a box above content -->
        <aside class="toc-box mb-4">
          <h2 class="toc-title">On this page</h2>
          {{ .TableOfContents }}
        </aside>
        <!-- [TOC-BOX-END] -->
      {{ end }}

      {{ if ne .Params.toc false -}}
        <nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation">
          {{ partial "sidebar/docs-toc-mobile.html" . }}
        </nav>
      {{ end -}}

      <!-- Display the content from _index.md -->
      {{ if site.Params.doks.headlineHash -}}
        {{ partial "main/headline-hash" .Content }}
      {{ else -}}
        {{ .Content }}
      {{ end -}}

      <!-- Cards for all children of this Section -->
      {{ if and .IsSection (not .Params.hideChildren) }}
        <div class="section-children">
          {{ if .Pages }}
            <h2>{{ default "In this section" .Params.childrenTitle }}</h2>
            <div class="cards-grid">
              {{ range .Pages }}
                <div class="child-page card card-docs-vertical h-100">
                  <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                  {{ with .Description }}
                    <p>{{ . }}</p>
                  {{ end }}
                </div>
              {{ end }}
            </div>
          {{ end }}
        </div>
      {{ end }}

      <div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between">
        {{ if site.Params.doks.lastMod -}}
          {{ partial "main/last-modified.html" . }}
        {{ end -}}
        {{ if site.Params.doks.editPage -}}
          {{ partial "main/edit-page.html" . }}
        {{ end -}}
      </div>
      {{ partial "main/docs-navigation.html" . }}
    </main>
    {{ if and (eq site.Params.doks.containerBreakpoint "fluid") (in .Site.Params.mainSections .Type) }}
      </div>
    {{ end }}
  </div>
{{ end }}