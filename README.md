# Website ocm.software

[![REUSE status](https://api.reuse.software/badge/github.com/open-component-model/ocm-website)](https://api.reuse.software/info/github.com/open-component-model/ocm-website)
[![publish site status](https://github.com/open-component-model/ocm-website/actions/workflows/publish-site.yaml/badge.svg)](https://github.com/open-component-model/ocm-website/actions/workflows/publish-site.yaml)

This repository contains the sources used to build the Open Component Model website at [https://ocm.software][website].

## Content Structure

All content lives under the `content` directory and is organized by section.

| Directory                      | Purpose                                                      |
|--------------------------------|--------------------------------------------------------------|
| `content/_index.md`            | Site landing page content                                    |
| `content/docs/concepts`        | Concept explanations                                         |
| `content/docs/getting-started` | Getting Started guides                                       |
| `content/docs/overview`        | Overview and introductory information                        |
| `content/docs/reference`       | Reference and CLI documentation (mounted via module imports) |
| `content/docs/tutorials`       | Tutorials                                                    |
| `content/community`            | Community information                                        |

Versioned snapshot folders live under `content_versioned/`:

| Directory                         | Purpose                                                 |
|-----------------------------------|---------------------------------------------------------|
| `content_versioned/version-old`   | old OCM v1 docs, currently served at site root (default) |
| `content_versioned/version-x.y.z` | Content snapshot for release version `x.y.z`            |

Snapshots are generated by a script and should not be edited manually.

## Create New Content

### Standard Content Pages

Content is written in Markdown and placed under the `content/` directory. Place content in the appropriate directory, keeping the structure consistent and descriptive.

Each page must contain frontmatter at the top of the file. Frontmatter defines metadata such as title, description, and optional logo.

Example frontmatter:

```yaml
title: "Page Title"
description: "A brief description of the page content"
logo: "ðŸ“„"
weight: 92
```

There is a template for frontmatter of [standard pages](content_templates/new-doc.md).

### Section Overview Pages

Sections are subfolders under `content/docs`. Each section requires an `_index.md` with frontmatter to define the sectionâ€™s title and description.
The `_index.md` should contain only metadata, no page content. The overview page will render cards for each document in the section automatically.

There is a template for frontmatter for [_index.md](content_templates/_index.md) of overview pages.

## Run Site Locally

To test and develop the website locally, you can start a Hugo development server.

Requirements:

- [Node.js](https://nodejs.org/en/download) â‰¥ 22.12.0
- [npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) â‰¥ 10.9.0
- [Hugo](https://gohugo.io/installation/extended) â‰¥ 0.153.0

Install dependencies and start Hugo server :

```sh
npm ci
npm run dev
```

The site will be available at [http://localhost:1313][website_local] with live reload.

## Cut-off New Versions

Versioning is performed via a script that snapshots the current `content/` and updates all necessary configuration files.
As long as the website still contains content for the old OCM v1 version, version "old" should be kept as the default version.

Examples:

```sh
# Create version 0.0.2 and keep the current defaultContentVersion
npm run cutoff -- 0.0.2 --keepDefault

# Create version 0.0.2 and set it as the defaultContentVersion
npm run cutoff -- 0.0.2
```

Until the first OCM v2 release ships, **the recommended standard** is to run the script with `--keepDefault`
so the legacy default stays in place.

What the script does (brief):

- Copies `content/` to `content_versioned/version-x.y.z`.
- Appends a `[versions."x.y.z"]` stanza (without weight) to `config/_default/hugo.toml` and optionally keeps
  `defaultContentVersion` unchanged when `--keepDefault` is supplied.
- Appends a grouped, per-version section to `config/_default/module.toml`.

The script keeps versioning configuration minimal and consistent. Authors only need to run the script; no manual edits of config files are required.

## Contributing

Contributions to content and improvements are welcome. Use Pull Requests against `main`. Keep content readable, accurate, and well-structured.

## Licensing

Please see our [LICENSE](LICENSE) for copyright and license information.
Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/open-component-model/open-component-model).

[website]: https://ocm.software
[website_local]: http://localhost:1313
